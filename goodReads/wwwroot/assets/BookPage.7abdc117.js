import{_ as x,r as B,g as S,w as C,h as d,A as r,v as N,P as l,x as q,f as F,o as s,c as i,b as p,a as e,n as R,q as O,t as c,s as $,p as A,d as T,y as V,z as E,B as L,l as b,m as w,C as j,D as z,S as M,e as u}from"./index.753f8587.js";const Q={props:{},setup(a){const n=B({});return S(()=>{}),C(()=>{}),{editable:n,book:d(()=>r.activeBook),async createReview(){try{n.bookId=r.activeBook.bookId,await N.createReview(n.value)}catch(o){l.error(o,"[createReview]")}}}}};function G(a,n,o,t,_,I){return null}const H=x(Q,[["render",G]]);const J={props:{review:{type:q,required:!0}},setup(a){const n=B({});return S(()=>{}),C(()=>{}),{editable:n,user:d(()=>r.user),account:d(()=>r.account),following:d(()=>r.following.find(o=>o.followingUserId==a.review.creatorId)),async deleteReview(){try{if(await l.confirm()){let o=a.review.id;await N.deleteReview(o)}}catch(o){l.error(o,"[removeReview]")}},async followByUserId(){try{let o={followingUserId:a.review.creator.id};await F.followByUserId(o),l.success(`Following ${a.review.creator.name}`)}catch(o){l.error(o,"[followingUserId]")}},async unFollowByUserId(){try{let o=this.following.id;await F.unFollowByUserId(o),l.success(`UnFollowed ${a.review.creator.name}`)}catch(o){l.error(o,"[followingUserId]")}}}}},f=a=>(A("data-v-00903cf7"),a=a(),T(),a),K={class:"card bg-light text-dark my-3 square position-relative"},X={key:0,class:"recommended"},Y=f(()=>e("img",{src:"src\\assets\\img\\bookMark.png",alt:"",width:"40"},null,-1)),Z=[Y],ee={class:"d-flex align-items-center justify-content-between px-5 pt-3 pb-2"},te={class:"d-flex align-items-center"},oe={role:"accountImg",class:""},se=["src"],ie={role:"name "},ae={class:"ms-3 fs-5 text-decoration-underline text-dark"},ne={role:"createdAt ",class:"d-flex align-items-center"},re=f(()=>e("i",{class:"mdi mdi-check"}," Follow",-1)),ce=[re],le=f(()=>e("i",{class:"mdi mdi-close"}," UnFollow",-1)),de=[le],_e={class:"text-dark lighten-60"},he=f(()=>e("img",{src:"src\\assets\\img\\delete.png",alt:"delete Icon",width:"40"},null,-1)),me=[he],ve={class:"px-4 text-dark"},ke={key:0},ge=f(()=>e("b",{class:"fs-5"}," Recommend ",-1)),be=[ge],we={class:"fs-5"},ue={key:1,class:"bg-light darken-10"},fe=f(()=>e("div",{class:"form-floating m-4"},[e("input",{type:"text",class:"form-control border-0",name:"reviewComment",id:"reviewComment",placeholder:""}),e("label",{for:"reviewComment"},"comment")],-1)),ye=[fe],pe={key:2,class:"bg-light darken-10"};function xe(a,n,o,t,_,I){var y;const m=$("router-link");return s(),i("div",K,[o.review.recommend?(s(),i("div",X,Z)):p("",!0),e("div",ee,[e("div",te,[R(m,{to:{name:"Profile",params:{id:(y=o.review.creator)==null?void 0:y.id}}},{default:O(()=>[e("div",oe,[e("img",{src:o.review.creator.picture,alt:"",class:"profileImg img-fluid rounded-circle elevation-5"},null,8,se)])]),_:1},8,["to"]),e("div",ie,[e("p",ae,c(o.review.creator.name.split("@")[0]),1)])]),e("div",ne,[t.user.isAuthenticated&&o.review.creator.id!=t.account.id&&!t.following?(s(),i("button",{key:0,onClick:n[0]||(n[0]=k=>t.followByUserId()),class:"btn p-0 me-3"},ce)):o.review.creator.id==t.account.id?(s(),i("button",{key:1,onClick:n[1]||(n[1]=k=>t.unFollowByUserId()),class:"btn p-0 me-3 text-danger"})):(s(),i("button",{key:2,onClick:n[2]||(n[2]=k=>t.unFollowByUserId()),class:"btn p-0 me-3 text-danger"},de)),e("p",_e,c(new Date(o.review.createdAt).toLocaleString()),1),o.review.creator.id==t.account.id?(s(),i("button",{key:3,onClick:n[3]||(n[3]=k=>t.deleteReview()),class:"btn ms-3",title:"Delete Review"},me)):p("",!0)])]),e("div",ve,[o.review.recommend?(s(),i("div",ke,be)):p("",!0),e("div",null,[e("p",we,c(o.review.body),1)])]),t.user.isAuthenticated?(s(),i("div",ue,ye)):(s(),i("div",pe,[e("button",{class:"btn selectable text-dark text-uppercase my-2 my-lg-0",onClick:n[4]||(n[4]=(...k)=>a.login&&a.login(...k))}," Login ")]))])}const Be=x(J,[["render",xe],["__scopeId","data-v-00903cf7"]]);const Se={props:{},setup(a){const n=B({});S(()=>{}),C(()=>{});const o=V();return{editable:n,book:d(()=>r.activeBook),bookShelves:d(()=>r.accountBookshelves),shelf:d(()=>r.activeBookShelf),copyToClipBoard(){navigator.clipboard.writeText(o.fullPath),l.toast("Copied To ClipBoard")},async makeActiveShelf(t){r.activeBookShelf=t},async addToBookShelf(t){try{if(r.activeBookShelf.hasActiveBook){l.toast("already apart of this list");return}let _={bookId:r.activeBook.id,bookShelfId:r.activeBookShelf.id};await E.addToBookShelf(_,t)}catch(_){l.error(_,"[addToBookShelf]")}}}}},g=a=>(A("data-v-7b851e12"),a=a(),T(),a),Ce={class:"card p-2 elevation-4 border-0"},Ie={key:0,class:"ms-3 text-danger text-decoration-underline"},Re={key:1},$e=g(()=>e("p",{class:"ms-3"},"Available for a limited time",-1)),Ae={class:"card-body d-flex flex-column justify-content-center"},Te={class:"mb-3"},Ue=g(()=>e("label",{for:"",class:"form-label"},"Add to BookShelf",-1)),De={class:"dropdown open"},Pe={class:"btn btn-secondary dropdown-toggle",type:"button",id:"triggerId","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},Fe=["disabled"],Le={key:1},je={class:"dropdown-menu","aria-labelledby":"triggerId"},ze={class:"dropdown-item"},Ne=["onClick"],Ve=g(()=>e("button",{class:"btn btn-outline-dark mt-2","data-bs-toggle":"modal","data-bs-target":"#createReview"}," Review ",-1)),We={class:"mt-3"},qe=g(()=>e("small",null,"Share with your network :",-1)),Oe={class:"d-flex gap-2 justify-content-center mt-2"},Ee=g(()=>e("a",{target:"_blank",OnClick:"window.open(this.href,'targetWindow','toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250'); return false;",href:"https://www.twitter.com"},[e("img",{src:"src\\assets\\img\\ShareIcons\\twitter.png",alt:"",width:"30"})],-1)),Me=g(()=>e("a",{href:"mailto:"},[e("img",{src:"src\\assets\\img\\ShareIcons\\email.png",alt:"",width:"30"})],-1)),Qe=g(()=>e("a",{target:"_blank",OnClick:"window.open(this.href,'targetWindow','toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250'); return false;",href:"https://www.facebook.com"},[e("img",{src:"src\\assets\\img\\ShareIcons\\facebook.png",alt:"",width:"30"})],-1)),Ge=g(()=>e("a",{target:"_blank",OnClick:"window.open(this.href,'targetWindow','toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250'); return false;",href:"http://pinterest.com"},[e("img",{src:"src\\assets\\img\\ShareIcons\\pinterest.png",alt:"",width:"30"})],-1));function He(a,n,o,t,_,I){return s(),i("div",Ce,[t.book.saleAbility=="Unavailable"?(s(),i("h3",Ie,c(t.book.saleAbility),1)):(s(),i("h3",Re,c(t.book.saleAbility),1)),$e,e("div",Ae,[e("div",null,[e("div",Te,[Ue,e("div",De,[e("button",Pe,[t.shelf?(s(),i("span",{key:0,class:L(t.shelf.hasActiveBook?"text-warning noSelect":"text-primary"),type:"button",disabled:t.shelf.hasActiveBook},c(t.shelf.type),11,Fe)):(s(),i("span",Le,c("pick a shelf")))]),e("div",je,[(s(!0),i(b,null,w(t.bookShelves,m=>(s(),i("button",ze,[e("span",{class:L(m.hasActiveBook?"text-warning noSelect":"text-primary"),onClick:y=>t.makeActiveShelf(m)},c(m.type),11,Ne)]))),256))])])]),e("button",{class:"btn btn-outline-dark",type:"button",onClick:n[0]||(n[0]=m=>t.addToBookShelf(t.book))}," Save To BookShelf ")]),Ve,e("div",We,[qe,e("div",Oe,[Ee,Me,e("img",{class:"link",src:"src\\assets\\img\\ShareIcons\\link.png",alt:"",width:"30",onClick:n[1]||(n[1]=m=>t.copyToClipBoard())}),Qe,Ge])])])])}const Je=x(Se,[["render",He],["__scopeId","data-v-7b851e12"]]);const Ke={setup(){S(()=>{a()}),C(()=>{r.activeBook||z.push("/")});async function a(){try{await j.getBookReviews(o.params.id)}catch(t){l.error(t,"[getBookReviews]")}}const n=B({}),o=V();return{editable:n,route:o,book:d(()=>r.activeBook),extraDetails:d(()=>r.extraDetails),bookShelves:d(()=>r.accountBookshelves),reviews:d(()=>r.reviews),async addToBookShelf(){},async searchByCategory(t){try{z.push("/search"),r.categoryQuery=t,await j.searchByCategory(r.categoryQuery)}catch(_){console.error("[searchByCategory]",_),l.error(_)}}}},components:{BookCard:M,CreateReview:H,ReviewCard:Be,AddToBookShelf:Je}},v=a=>(A("data-v-7f845433"),a=a(),T(),a),Xe={key:0,class:"container mt-4"},Ye={class:"row bookRow"},Ze={class:"col-md-3 text-center animate__animated animate__fadeInLeft"},et=["src"],tt=["src"],ot={class:"mt-2"},st=["href"],it=v(()=>e("i",{class:"mdi mdi-book fs-5"},null,-1)),at=u(" Read Preview"),nt=[it,at],rt={class:""},ct=["src"],lt={class:"col-md-6 animate__animated animate__fadeInUp"},dt={class:"bookTitle elevation-5 bg-create p-2 px-3"},_t={class:"d-flex"},ht=["onClick","title"],mt={key:0,class:"d-flex align-items-center"},vt={class:"mdi mdi-star fs-3 text-create"},kt={class:"text-dark"},gt={key:1,class:"d-flex align-items-center"},bt={class:"mdi mdi-star fs-3 text-grey"},wt=v(()=>e("h4",{class:"ms-2"},"no ratings",-1)),ut=v(()=>e("div",{class:"border-bottom border-2 my-3 border-muted"},null,-1)),ft={class:"lead text-dark"},yt={class:"text-dark"},pt=v(()=>e("i",{class:"mdi mdi-calendar fs-4"},null,-1)),xt=u(),Bt=v(()=>e("b",null," Release Date -",-1)),St={class:""},Ct={class:"d-flex align-items-center"},It=v(()=>e("b",{class:"me-2 mb-3 mt-3"},"Categories -",-1)),Rt=["onClick"],$t=v(()=>e("b",null,"Language -",-1)),At=v(()=>e("b",null," Page Count -",-1)),Tt={class:"col-md-3 animate__animated animate__fadeInRight"},Ut={class:"",id:"reviews"},Dt={class:"row"},Pt=v(()=>e("div",{class:"col-md-12 d-flex justify-content-between my-3"},[e("h3",{class:"text-dark"},"Community Reviews"),e("button",{"data-bs-toggle":"modal","data-bs-target":"#createReview",class:"btn bg-create text-dark fw-bold d-flex align-items-center justify-content-center"},[e("i",{class:"mdi mdi-comment fs-4 text-dark me-2"}),u(" Write a Review ")])],-1));function Ft(a,n,o,t,_,I){var k,U,D,P;const m=$("AddToBookShelf"),y=$("ReviewCard");return t.book?(s(),i("div",Xe,[e("div",Ye,[e("div",Ze,[(k=t.book)!=null&&k.largeImg?(s(),i("img",{key:0,src:(U=t.book)==null?void 0:U.largeImg,alt:"",class:"img-fluid rounded elevation-5",width:"400",height:"600"},null,8,et)):(s(),i("img",{key:1,src:(D=t.book)==null?void 0:D.img,alt:"",class:"img-fluid rounded elevation-5",width:"400",height:"600"},null,8,tt)),e("div",ot,[e("a",{href:t.book.previewLink,target:"_blank",class:"text-danger previewText"},nt,8,st)]),e("div",rt,[t.book?(s(),i("img",{key:0,src:(P=t.book)==null?void 0:P.img,alt:"",class:"img-fluid smallerImg rounded elevation-5 mt-5",width:"100",height:"200"},null,8,ct)):p("",!0)])]),e("div",lt,[e("h1",dt,c(t.book.title),1),e("div",_t,[(s(!0),i(b,null,w(t.book.authors,h=>(s(),i("b",{class:"authors mx-2 text-dark selectable p-1 rounded",onClick:W=>t.searchByCategory(h),title:t.book.authors},c(h),9,ht))),256))]),t.book.averageRating>=1?(s(),i("div",mt,[(s(!0),i(b,null,w(t.book.averageRating,h=>(s(),i("i",vt))),256)),e("h4",kt,c(t.book.averageRating),1)])):(s(),i("div",gt,[(s(),i(b,null,w(5,h=>e("i",bt)),64)),wt])),ut,e("div",null,[e("p",ft,c(t.book.description),1)]),e("div",yt,[e("p",null,[pt,xt,Bt,u(" "+c(new Date(t.book.publishedDate).toLocaleDateString()),1)]),e("b",St,"Publisher - "+c(t.book.publisher),1),e("div",Ct,[It,(s(!0),i(b,null,w(t.book.categories,h=>(s(),i("button",{class:"btn btn-outline-dark my-3 text-dark p-1 rounded-pill px-2 mx-2",onClick:W=>t.searchByCategory(h)},c(h),9,Rt))),256))]),e("p",null,[$t,u(" "+c(t.book.language),1)]),e("p",null,[At,u(" "+c(t.book.pageCount),1)])])]),e("div",Tt,[R(m)])]),e("section",Ut,[e("div",Dt,[Pt,(s(!0),i(b,null,w(t.reviews,h=>(s(),i("div",{class:"col-md-12",key:h.id},[R(y,{review:h},null,8,["review"])]))),128))])])])):p("",!0)}const jt=x(Ke,[["render",Ft],["__scopeId","data-v-7f845433"]]);export{jt as default};

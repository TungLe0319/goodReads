import{_ as x,r as B,g as C,w as S,h as d,A as r,v as N,P as c,x as q,f as F,o as s,c as i,b as p,a as e,n as $,q as O,t as l,s as R,p as A,d as T,y as E,z as Q,B as V,C as G,D as L,l as g,m as w,G as j,H as z,S as H,e as f}from"./index.b744b949.js";const M={props:{},setup(a){const n=B({});return C(()=>{}),S(()=>{}),{editable:n,book:d(()=>r.activeBook),async createReview(){try{n.bookId=r.activeBook.bookId,await N.createReview(n.value)}catch(o){c.error(o,"[createReview]")}}}}};function J(a,n,o,t,_,I){return null}const K=x(M,[["render",J]]);const X={props:{review:{type:q,required:!0}},setup(a){const n=B({});return C(()=>{}),S(()=>{}),{editable:n,user:d(()=>r.user),account:d(()=>r.account),following:d(()=>r.following.find(o=>o.followingUserId==a.review.creatorId)),async deleteReview(){try{if(await c.confirm()){let o=a.review.id;await N.deleteReview(o)}}catch(o){c.error(o,"[removeReview]")}},async followByUserId(){try{let o={followingUserId:a.review.creator.id};console.log(o),await F.followByUserId(o),c.success(`Following ${a.review.creator.name}`)}catch(o){c.error(o,"[followingUserId]")}},async unFollowByUserId(){try{let o=this.following.id;console.log(o),await F.unFollowByUserId(o),c.success(`UnFollowed ${a.review.creator.name}`)}catch(o){c.error(o,"[followingUserId]")}}}}},u=a=>(A("data-v-4fd79dd9"),a=a(),T(),a),Y={class:"card bg-light text-dark my-3 square position-relative"},Z={key:0,class:"recommended"},ee=u(()=>e("img",{src:E,alt:"",width:"40"},null,-1)),te=[ee],oe={class:"d-flex align-items-center justify-content-between px-5 pt-3 pb-2"},se={class:"d-flex align-items-center"},ie={role:"accountImg",class:""},ae=["src"],ne={role:"name "},re={class:"ms-3 fs-5 text-decoration-underline text-dark"},le={role:"createdAt ",class:"d-flex align-items-center"},ce=u(()=>e("i",{class:"mdi mdi-check"}," Follow",-1)),de=[ce],_e=u(()=>e("i",{class:"mdi mdi-close"}," UnFollow",-1)),he=[_e],me={class:"text-dark lighten-60"},ve=u(()=>e("img",{src:Q,alt:"delete Icon",width:"40"},null,-1)),ke=[ve],be={class:"px-4 text-dark"},ge={key:0},we=u(()=>e("b",{class:"fs-5"}," Recommend ",-1)),fe=[we],ue={class:"fs-5"},ye={key:1,class:"bg-light darken-10"},pe=u(()=>e("div",{class:"form-floating m-4"},[e("input",{type:"text",class:"form-control border-0",name:"reviewComment",id:"reviewComment",placeholder:""}),e("label",{for:"reviewComment"},"comment")],-1)),xe=[pe],Be={key:2,class:"bg-light darken-10"};function Ce(a,n,o,t,_,I){var y;const m=R("router-link");return s(),i("div",Y,[o.review.recommend?(s(),i("div",Z,te)):p("",!0),e("div",oe,[e("div",se,[$(m,{to:{name:"Profile",params:{id:(y=o.review.creator)==null?void 0:y.id}}},{default:O(()=>[e("div",ie,[e("img",{src:o.review.creator.picture,alt:"",class:"profileImg img-fluid rounded-circle elevation-5"},null,8,ae)])]),_:1},8,["to"]),e("div",ne,[e("p",re,l(o.review.creator.name.split("@")[0]),1)])]),e("div",le,[t.user.isAuthenticated&&o.review.creator.id!=t.account.id&&!t.following?(s(),i("button",{key:0,onClick:n[0]||(n[0]=k=>t.followByUserId()),class:"btn p-0 me-3"},de)):o.review.creator.id==t.account.id?(s(),i("button",{key:1,onClick:n[1]||(n[1]=k=>t.unFollowByUserId()),class:"btn p-0 me-3 text-danger"})):(s(),i("button",{key:2,onClick:n[2]||(n[2]=k=>t.unFollowByUserId()),class:"btn p-0 me-3 text-danger"},he)),e("p",me,l(new Date(o.review.createdAt).toLocaleString()),1),o.review.creator.id==t.account.id?(s(),i("button",{key:3,onClick:n[3]||(n[3]=k=>t.deleteReview()),class:"btn ms-3",title:"Delete Review"},ke)):p("",!0)])]),e("div",be,[o.review.recommend?(s(),i("div",ge,fe)):p("",!0),e("div",null,[e("p",ue,l(o.review.body),1)])]),t.user.isAuthenticated?(s(),i("div",ye,xe)):(s(),i("div",Be,[e("button",{class:"btn selectable text-dark text-uppercase my-2 my-lg-0",onClick:n[4]||(n[4]=(...k)=>a.login&&a.login(...k))}," Login ")]))])}const Se=x(X,[["render",Ce],["__scopeId","data-v-4fd79dd9"]]),Ie="/assets/twitter.f5d810e3.png",$e="/assets/email.1ffd3a06.png",Re="/assets/link.d43239ee.png",Ae="/assets/facebook.e5780808.png",Te="/assets/pinterest.2ba34ece.png";const Ue={props:{},setup(a){const n=B({});C(()=>{}),S(()=>{});const o=V();return{editable:n,book:d(()=>r.activeBook),bookShelves:d(()=>r.accountBookshelves),shelf:d(()=>r.activeBookShelf),copyToClipBoard(){navigator.clipboard.writeText(o.fullPath),c.toast("Copied To ClipBoard")},async makeActiveShelf(t){r.activeBookShelf=t},async addToBookShelf(t){try{if(r.activeBookShelf.hasActiveBook){c.toast("already apart of this list");return}let _={bookId:r.activeBook.id,bookShelfId:r.activeBookShelf.id};await G.addToBookShelf(_,t)}catch(_){c.error(_,"[addToBookShelf]")}}}}},b=a=>(A("data-v-4911c96b"),a=a(),T(),a),De={class:"card p-2 elevation-4 border-0"},Pe={key:0,class:"ms-3 text-danger text-decoration-underline"},Fe={key:1},Le=b(()=>e("p",{class:"ms-3"},"Available for a limited time",-1)),je={class:"card-body d-flex flex-column justify-content-center"},ze={class:"mb-3"},Ne=b(()=>e("label",{for:"",class:"form-label"},"Add to BookShelf",-1)),Ve={class:"dropdown open"},We={class:"btn btn-secondary dropdown-toggle",type:"button",id:"triggerId","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},qe=["disabled"],Oe={key:1},Ee={class:"dropdown-menu","aria-labelledby":"triggerId"},Qe={class:"dropdown-item"},Ge=["onClick"],He=b(()=>e("button",{class:"btn btn-outline-dark mt-2","data-bs-toggle":"modal","data-bs-target":"#createReview"}," Review ",-1)),Me={class:"mt-3"},Je=b(()=>e("small",null,"Share with your network :",-1)),Ke={class:"d-flex gap-2 justify-content-center mt-2"},Xe=b(()=>e("a",{target:"_blank",OnClick:"window.open(this.href,'targetWindow','toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250'); return false;",href:"https://www.twitter.com"},[e("img",{src:Ie,alt:"",width:"30"})],-1)),Ye=b(()=>e("a",{href:"mailto:"},[e("img",{src:$e,alt:"",width:"30"})],-1)),Ze=b(()=>e("a",{target:"_blank",OnClick:"window.open(this.href,'targetWindow','toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250'); return false;",href:"https://www.facebook.com"},[e("img",{src:Ae,alt:"",width:"30"})],-1)),et=b(()=>e("a",{target:"_blank",OnClick:"window.open(this.href,'targetWindow','toolbar=no,location=0,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=250'); return false;",href:"http://pinterest.com"},[e("img",{src:Te,alt:"",width:"30"})],-1));function tt(a,n,o,t,_,I){return s(),i("div",De,[t.book.saleAbility=="Unavailable"?(s(),i("h3",Pe,l(t.book.saleAbility),1)):(s(),i("h3",Fe,l(t.book.saleAbility),1)),Le,e("div",je,[e("div",null,[e("div",ze,[Ne,e("div",Ve,[e("button",We,[t.shelf?(s(),i("span",{key:0,class:L(t.shelf.hasActiveBook?"text-warning noSelect":"text-primary"),type:"button",disabled:t.shelf.hasActiveBook},l(t.shelf.type),11,qe)):(s(),i("span",Oe,l("pick a shelf")))]),e("div",Ee,[(s(!0),i(g,null,w(t.bookShelves,m=>(s(),i("button",Qe,[e("span",{class:L(m.hasActiveBook?"text-warning noSelect":"text-primary"),onClick:y=>t.makeActiveShelf(m)},l(m.type),11,Ge)]))),256))])])]),e("button",{class:"btn btn-outline-dark",type:"button",onClick:n[0]||(n[0]=m=>t.addToBookShelf(t.book))}," Save To BookShelf ")]),He,e("div",Me,[Je,e("div",Ke,[Xe,Ye,e("img",{class:"link",src:Re,alt:"",width:"30",onClick:n[1]||(n[1]=m=>t.copyToClipBoard())}),Ze,et])])])])}const ot=x(Ue,[["render",tt],["__scopeId","data-v-4911c96b"]]);const st={setup(){C(()=>{a()}),S(()=>{r.activeBook||z.push("/")});async function a(){try{await j.getBookReviews(o.params.id)}catch(t){c.error(t,"[getBookReviews]")}}const n=B({}),o=V();return{editable:n,route:o,book:d(()=>r.activeBook),extraDetails:d(()=>r.extraDetails),bookShelves:d(()=>r.accountBookshelves),reviews:d(()=>r.reviews),async addToBookShelf(){},async searchByCategory(t){try{z.push("/search"),r.categoryQuery=t,await j.searchByCategory(r.categoryQuery)}catch(_){console.error("[searchByCategory]",_),c.error(_)}}}},components:{BookCard:H,CreateReview:K,ReviewCard:Se,AddToBookShelf:ot}},v=a=>(A("data-v-7f845433"),a=a(),T(),a),it={key:0,class:"container mt-4"},at={class:"row bookRow"},nt={class:"col-md-3 text-center animate__animated animate__fadeInLeft"},rt=["src"],lt=["src"],ct={class:"mt-2"},dt=["href"],_t=v(()=>e("i",{class:"mdi mdi-book fs-5"},null,-1)),ht=f(" Read Preview"),mt=[_t,ht],vt={class:""},kt=["src"],bt={class:"col-md-6 animate__animated animate__fadeInUp"},gt={class:"bookTitle elevation-5 bg-create p-2 px-3"},wt={class:"d-flex"},ft=["onClick","title"],ut={key:0,class:"d-flex align-items-center"},yt={class:"mdi mdi-star fs-3 text-create"},pt={class:"text-dark"},xt={key:1,class:"d-flex align-items-center"},Bt={class:"mdi mdi-star fs-3 text-grey"},Ct=v(()=>e("h4",{class:"ms-2"},"no ratings",-1)),St=v(()=>e("div",{class:"border-bottom border-2 my-3 border-muted"},null,-1)),It={class:"lead text-dark"},$t={class:"text-dark"},Rt=v(()=>e("i",{class:"mdi mdi-calendar fs-4"},null,-1)),At=f(),Tt=v(()=>e("b",null," Release Date -",-1)),Ut={class:""},Dt={class:"d-flex align-items-center"},Pt=v(()=>e("b",{class:"me-2 mb-3 mt-3"},"Categories -",-1)),Ft=["onClick"],Lt=v(()=>e("b",null,"Language -",-1)),jt=v(()=>e("b",null," Page Count -",-1)),zt={class:"col-md-3 animate__animated animate__fadeInRight"},Nt={class:"",id:"reviews"},Vt={class:"row"},Wt=v(()=>e("div",{class:"col-md-12 d-flex justify-content-between my-3"},[e("h3",{class:"text-dark"},"Community Reviews"),e("button",{"data-bs-toggle":"modal","data-bs-target":"#createReview",class:"btn bg-create text-dark fw-bold d-flex align-items-center justify-content-center"},[e("i",{class:"mdi mdi-comment fs-4 text-dark me-2"}),f(" Write a Review ")])],-1));function qt(a,n,o,t,_,I){var k,U,D,P;const m=R("AddToBookShelf"),y=R("ReviewCard");return t.book?(s(),i("div",it,[e("div",at,[e("div",nt,[(k=t.book)!=null&&k.largeImg?(s(),i("img",{key:0,src:(U=t.book)==null?void 0:U.largeImg,alt:"",class:"img-fluid rounded elevation-5",width:"400",height:"600"},null,8,rt)):(s(),i("img",{key:1,src:(D=t.book)==null?void 0:D.img,alt:"",class:"img-fluid rounded elevation-5",width:"400",height:"600"},null,8,lt)),e("div",ct,[e("a",{href:t.book.previewLink,target:"_blank",class:"text-danger previewText"},mt,8,dt)]),e("div",vt,[t.book?(s(),i("img",{key:0,src:(P=t.book)==null?void 0:P.img,alt:"",class:"img-fluid smallerImg rounded elevation-5 mt-5",width:"100",height:"200"},null,8,kt)):p("",!0)])]),e("div",bt,[e("h1",gt,l(t.book.title),1),e("div",wt,[(s(!0),i(g,null,w(t.book.authors,h=>(s(),i("b",{class:"authors mx-2 text-dark selectable p-1 rounded",onClick:W=>t.searchByCategory(h),title:t.book.authors},l(h),9,ft))),256))]),t.book.averageRating>=1?(s(),i("div",ut,[(s(!0),i(g,null,w(t.book.averageRating,h=>(s(),i("i",yt))),256)),e("h4",pt,l(t.book.averageRating),1)])):(s(),i("div",xt,[(s(),i(g,null,w(5,h=>e("i",Bt)),64)),Ct])),St,e("div",null,[e("p",It,l(t.book.description),1)]),e("div",$t,[e("p",null,[Rt,At,Tt,f(" "+l(new Date(t.book.publishedDate).toLocaleDateString()),1)]),e("b",Ut,"Publisher - "+l(t.book.publisher),1),e("div",Dt,[Pt,(s(!0),i(g,null,w(t.book.categories,h=>(s(),i("button",{class:"btn btn-outline-dark my-3 text-dark p-1 rounded-pill px-2 mx-2",onClick:W=>t.searchByCategory(h)},l(h),9,Ft))),256))]),e("p",null,[Lt,f(" "+l(t.book.language),1)]),e("p",null,[jt,f(" "+l(t.book.pageCount),1)])])]),e("div",zt,[$(m)])]),e("section",Nt,[e("div",Vt,[Wt,(s(!0),i(g,null,w(t.reviews,h=>(s(),i("div",{class:"col-md-12",key:h.id},[$(y,{review:h},null,8,["review"])]))),128))])])])):p("",!0)}const Et=x(st,[["render",qt],["__scopeId","data-v-7f845433"]]);export{Et as default};
